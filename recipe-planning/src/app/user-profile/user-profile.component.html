<div *ngIf="targetUser && currentUser">
  <h2>{{ targetUser.username }}'s profile!</h2>
  <p><strong>Username:</strong> {{ targetUser.username }}</p>
  <p><strong>Email:</strong> {{ targetUser.email }}</p>
  <p><strong>Followers:</strong> {{ targetUser.getFollowers().length }}</p>
  <p><strong>Following:</strong> {{ targetUser.getFollowing().length }}</p>
  <p><strong>Saved Recipes:</strong> {{ targetUser.savedRecipes }}</p>

  <div class="follow-button-container">
    <app-follow-button
      [targetUser]="targetUser"
      [isFollowing]="isFollowing"
      (follow)="onFollow()"
      (unfollow)="onUnfollow()"
    ></app-follow-button>
  </div>
</div>

<div *ngIf="currentUser && !targetUser">
  <h2>Welcome, {{ currentUser.username }}!</h2>
  <p><strong>Username:</strong> {{ currentUser.username }}</p>
  <p><strong>Email:</strong> {{ currentUser.email }}</p>
  
  <div class="followers-section">
    <h3>Followers ({{ currentUser.getFollowers().length }})</h3>
    <div class="list-container">
      <div *ngFor="let follower of followersList" class="user-item">
        <span>{{ follower.username }}</span>
        <button mat-raised-button color="warn" (click)="removeFollower(follower.id)">
          Remove Follower
        </button>
      </div>
      <p *ngIf="followersList.length === 0">No followers yet.</p>
    </div>
  </div>
  
  <div class="following-section">
    <h3>Following ({{ currentUser.getFollowing().length }})</h3>
    <div class="list-container">
      <div *ngFor="let following of followingList" class="user-item">
        <span>{{ following.username }}</span>
        <button mat-raised-button color="warn" (click)="unfollowUser(following.id)">
          Unfollow
        </button>
      </div>
      <p *ngIf="followingList.length === 0">Not following anyone yet.</p>
    </div>
  </div>

  <p><strong>Saved Recipes:</strong></p>
  <div *ngIf="savedRecipes.length > 0">
    <div *ngFor="let recipe of savedRecipes" class="recipe-card">
      <h3>{{ recipe.recipe_name }}</h3>
      <p><strong>Author:</strong> {{ recipe.author }}</p>
      <p><strong>Type:</strong> {{ recipe.type }}</p>
      <p><strong>Ingredients:</strong></p>
      <ul>
        <li *ngFor="let ingredient of recipe.ingredients">{{ ingredient }}</li>
      </ul>
      <p><strong>Instructions:</strong></p>
      <ol>
        <li *ngFor="let instruction of recipe.instructions">
          {{ instruction }}
        </li>
      </ol>
      <p><strong>Nutrition Facts:</strong> {{ recipe.nutrition_facts }}</p>
    </div>
  </div>
  <p *ngIf="savedRecipes.length === 0">No saved recipes yet.</p>
</div>

<div *ngIf="!currentUser">
  <h2>Please login to see your profile!</h2>
</div>
